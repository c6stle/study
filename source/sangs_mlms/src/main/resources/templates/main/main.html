<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" layout:decorator="layout/mainLayout">
<head>
	<!-- head inclue -->
	<th:block th:replace="fragments/head_inc :: head_inc" />
	
</head>
<body style="min-width: 1620px;">
	<input type="hidden" id="refreshPath" value=""/>
    <!-- wrap -->
    <div id="wrap">
        <!-- skip_nav -->
        <div id="skip_nav">
            <a href="#lnb">레프트메뉴 바로가기</a>
            <a href="#content">본문내용 바로가기</a>
        </div>
        <!--// skip -->
        <!-- container -->
		<div class="container">
		
			<!-- left inclue -->
			<th:block th:replace="fragments/left_inc :: left_inc" />
				
            <!-- content -->
			<div id="content">
			
                <!-- content_top_area -->
				<th:block th:replace="fragments/top_inc :: top_inc" />
                <!--// content_top_area -->

				<!-- main content frame start -->
				<iframe src="" style="width: 100%;  border:0; min-height: 500px; height: calc(100vh - 50px)" id="main_content" name="main_content" onload="setFrameHeight()" ></iframe>
				<!-- main content frame end -->

            </div>
            <!--// content -->
        </div>
        <!--// container -->
    </div>
    <!--// wrap -->
</body>


<script type="text/javascript" th:inline="javascript">

	
	
	$(document).ready(function() {
		$(window).on("resize", function() {
			setFrameHeight();
		});
		
		
		if(!$("#overlay").length) {
			var spinnerHtml = '<div id="overlay"><div class="cv-spinner"><span class="spinner"></span></div></div>';
			$("body").append(spinnerHtml);
		};
		
		
		fnPageInit();
	});
	
	function fnPageInit() {
		// 메인페이지 
		
	
		
	}
	
	
	function fnStartMainLoading() {
		$("#overlay").fadeIn(300);
	}

	function fnStopMainLoading() {
		$("#overlay").fadeOut(300);
	}
	
	function fnIsMainFrame() {
		return true;
	}
	// 메뉴 open 
	function fnClickMenu(url) {
		
		// 현재 경로 변수 set	
		$("#refreshPath").val(url);	
		// 페이지 이동 
		$("#main_content").attr("src", url);
		/*
		$.ajax({
			url: url
			, method : "POST"
			, contentType: 'application/json'
			, data: {}
			, success: function(data){
				
				$("#main_content").html(data);
				//$("#dv_json_area").text(JSON.stringify(data));
			}
		});
		*/
		
	}
	function getMainClientHeight(){
		return document.documentElement.clientHeight;
	}
	
	function setFrameHeight() {
		
		try {
			var $frame = $("#main_content");
			var curHeight = $frame.contents().find('body').height();
			//console.log("---- > " + curHeight);
			//console.log(curHeight + "---" + window.outerHeight );
			if(Number(curHeight) < Number(window.outerHeight) - 50)
				curHeight = Number(window.outerHeight - 50);
			$frame.css('height', (curHeight + 20) + 'px' );	// 스크롤 20 추가
		} catch(e) {
			console.log(e);
		}
		
	}
	
	function setFrameHeight_old() {
		
		
		var brwHeight = document.body.offsetHeight;
		//console.log("brwHeight : " + brwHeight);
		
		var curHeight = 0;
		//var $frame = $('iframe:eq(0)');
		var $frame = $("#main_content");
		
		//console.log($frame.contents().find('body').html());
		//curHeight = $frame.contents().find('body > .content').height() + $(".navbar-collapse").height();
		curHeight = $frame.contents().find('body .container').height() + 50;

		var layerHeight = 0;		
		if($frame.contents().find('body .popup.layer') != undefined && $frame.contents().find('body .popup.layer').length && $frame.contents().find('body .popup.layer').length > 0) {
			layerHeight = $frame.contents().find('body .popup.layer').height() + 50;
		}
		if(Number(layerHeight) > Number(curHeight))
			curHeight = layerHeight;
		
		//alert(curHeight);
		//alert(curHeight + "|" +brwHeight);
		//brwHeight = brwHeight - 80;
		
		//if(curHeight > brwHeight)
		//	brwHeight = curHeight;
			//brwHeight = brwHeight + 200;
			
		//$frame.css('height',brwHeight + 'px' );
		//$frame.css('height',curHeight + 'px' );
	}
</script>

	
</html>
