<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" layout:decorator="layout/mainLayout">

<head>
<th:block th:replace="fragments/head_inc :: head_inc" />
<style type="text/css">
table.view td {
border:none
}
.view_wrap {
padding:5px 10px 5px
}
</style>
</head>



<body id="body">
	<div id="wrap">
		<div class="container">
			<div id="content">
				<div class="page_info_area">
					<div class="left">
                        <div class="location_area">
                        </div>
                        <div class="title_area">
                            <p>결과 분석</p>
                            <a href="#" class="reload_btn" title="새로고침">새로고침</a>
                            <a href="#" class="help_btn" title="도움말">도움말</a>
                        </div>
                    </div>
                    <div class="right">
                        <div class="button_area">
                            <button class="btn" title="결과데이터 다운로드" onclick="fnCommFileDown('RESULT', $('#lrnExcnSn').val())">결과데이터 다운로드</button>
                            <button class="btn" id="trainDataDownBtn" title="훈련데이터 다운로드" onclick="fnCommFileDown('DATASET', $('#traingDatasetSn').val())">훈련데이터 다운로드</button>
                            <button class="btn" id="testDataDownBtn" title="테스트데이터 다운로드" onclick="fnCommFileDown('DATASET', $('#testDatasetSn').val())">테스트데이터 다운로드</button>
                            <button class="btn" title="닫기" onclick="fnExit();">닫기</button>
                        </div>
                    </div>
                </div>
                
                <div class="content_area">
	                <form>
						<input type="hidden" id="resultFlpth">
						<input type="hidden" id="lrnExcnSn" th:value="${paramMap.lrnExcnSn}">
						<input type="hidden" id="testHistSn" th:value="${paramMap.testHistSn}">
						<input type="hidden" id="traingDatasetSn">
						<input type="hidden" id="testDatasetSn">
					</form>
					<div class="division20">
						<div class="search_wrap">
							<table class="search">
								<colgroup>
									<col style="width:120px;" />
									<col style="width:auto;" />
									<col style="width:60px;" />
									<col style="width:120px;" />
									<col style="width:auto;" />
									<col style="width:60px;" />
									<col style="width:120px;" />
									<col style="width:auto;" />
								</colgroup>
								<tbody>
									<tr>
										<th scope="row"><label for="lrnNm">학습명</label></th>
										<td><input type="text" class="in_w100" id="lrnNm" name="lrnNm" readonly /></td>
										<td></td>
										<th scope="row"><label for="accrcyRate">정확도</label></th>
										<td><input type="text" class="in_w100" id="accrcyRate" name="accrcyRate" readonly /></td>
										<td></td>
										<th scope="row"><label for="otherScore">정밀도/재현율/F1</label></th>
										<td><input type="text" class="in_w100" id="otherScore" name="otherScore" readonly /></td>
									</tr>
									<tr>
										<th scope="row"><label for="traingBgngDt">수행일시(아이디)</label></th>
										<td><input type="text" class="in_w100" id="traingBgngDt" name="traingBgngDt" readonly /></td>
										<td></td>
										<th scope="row"><label for="lrnTime">소요시간</label></th>
										<td><input type="text" class="in_w100" id="lrnTime" name="lrnTime" readonly /></td>
										<td></td>
										<th scope="row"><label for="lrnModelId">학습모델 아이디</label></th>
										<td><input type="text" class="in_w100" id="lrnModelId" name="lrnModelId" readonly /></td>
									</tr>
								</tbody>
							</table>
						</div>
					</div>
					
					<div id="uldModelNone">
					
					<div class="division20">
						<div class="tbl_top">
							<p class="tit v2"><span>훈련데이터셋</span></p>							
						</div>
						<div class="search_warp">
							<table class="list fixed">
								<colgroup>
									<col style="width:240px" />
									<col style="width:240px" />
									<col style="width:220px" />
									<col style="width:auto;" />
									<col style="width:120px;" />
								</colgroup>
								<thead>
									<tr>
										<th>훈련 데이터셋</th>
										<th>데이터셋 경로</th>
										<th>데이터 수</th>
										<th>데이터셋 컬럼 헤더</th>
										<th>Target 컬럼</th>
									</tr>
								</thead>
								<tbody>
									<tr>
										<td id="train_lrnDatasetNm"></td>
										<td id="train_dataFlpth"></td>
										<td id="train_dataLayout"></td>
										<td id="train_dataHder"></td>
										<td id="train_trgetValue"></td>
									</tr>
								</tbody>
							</table>
						</div>
					</div>
					
					<div class="division20">
						<div class="tbl_top">
							<p class="tit v2"><span>훈련데이터 분석</span></p>							
						</div>
						<div class="view_wrap">
							<div class="table_area">
								<table class="view" style="border:none;" id="traindata_anal">
									<colgroup>
										<col style="width:auto;" />
										<col style="width:auto;" />
										<col style="width:auto;" />
										<col style="width:auto;" />
										<col style="width:auto;" />
										<col style="width:auto;" />
									</colgroup>
									<tbody>
										<tr>
											<td colspan="2">
												<div id="dv_trainUniqCharts" style="height:500px;"></div>
											</td>
											<td colspan="2">
												<div id="dv_trainTargetCharts" style="height:500px;"></div>
											</td>
											<td colspan="2">
												<div id="dv_trainBoxPlot" style="height:500px;"></div>
											</td>
										</tr>
									</tbody>
								</table>
							</div>
						</div>
					</div>
					
					<div class="division20">
						<div class="tbl_top">
							<p class="tit v2"><span>테스트데이터셋</span></p>							
						</div>
						<div class="search_warp">
							<table class="list">
								<colgroup>
									<col style="width:220px" />
									<col style="width:220px" />
									<col style="width:220px" />
									<col style="width:auto;" />
									<col style="width:120px;" />
								</colgroup>
								<thead>
									<tr>
										<th>테스트 데이터셋</th>
										<th>데이터셋 경로</th>
										<th>데이터 수</th>
										<th>데이터셋 컬럼 헤더</th>
										<th>Target 컬럼</th>
									</tr>
								</thead>
								<tbody>
									<tr>
										<td id="test_lrnDatasetNm"></td>
										<td id="test_dataFlpth"></td>
										<td id="test_dataLayout"></td>
										<td id="test_dataHder"></td>
										<td id="test_trgetValue"></td>
									</tr>
								</tbody>
							</table>
						</div>
					</div>
					
					<div class="division20">
						<div class="tbl_top">
							<p class="tit v2"><span>테스트데이터 분석</span></p>							
						</div>
						<div class="view_wrap">
							<div class="table_area">
								<table class="view">
									<colgroup>
										<col style="width:auto;" />
										<col style="width:auto;" />
										<col style="width:auto;" />
									</colgroup>
									<tbody>
										<tr>
											<td>
												<div id="dv_testUniqCharts" style="height:500px;"></div>
											</td>
											<td>
												<div id="dv_testTargetCharts" style="height:500px;"></div>
											</td>
											<td>
												<div id="dv_testBoxPlot" style="height:500px;"></div>
											</td>
										</tr>
									</tbody>
								</table>
							</div>
						</div>
					</div>
					
					
					
					<div class="division20" id="acc_div">	
						<div class="tbl_top">
							<p class="tit v2"><span>각 클래스별 분류 정확도</span></p>							
						</div>
						<div class="view">
							<div class="table_area">
								<table class="view" id="acc_data_table">
									<tbody>
										<tr>
											<td>
												<div id="dv_truePredictRate" style="width:100%;"></div>
											</td>
										</tr>
									</tbody>
								</table>
							</div>
						</div>
					</div>
					
					<div class="division20" id="cm_div">	
						<div class="tbl_top">
							<p class="tit v2"><span>각 클래스별 예측 행렬</span></p>							
						</div>
						<div style="overflow:auto; width:99%; max-height:900px" class="table_area" id="cm_data_table"></div>
					</div>
					<div class="division20" id="fail_div">
						<div class="tbl_top">
							<p class="tit v2"><span>예측 실패 목록</span></p>							
						</div>
						<div style="overflow:auto; width:99%; max-height:600px" class="table_area" id="tb_data_table"></div>
					</div>
					
					
					<div class="division20">
						<div class="tbl_top">
							<p class="tit v2"><span>훈련 로그</span></p>							
						</div>
						<div>
							<textarea style="overflow-y:scroll; width:100%; height:300px" id="trainLog"></textarea>
						</div>
					</div>
					
					</div>
					
					<div class="division">
						<div class="tbl_top">
							<p class="tit v2"><span>테스트 로그</span></p>	
						</div>
						<div>
							<textarea style="overflow-y:scroll; width:100%; height:300px" id="testLog"></textarea>
						</div>
					</div>
					
                </div>
                
            </div>
        </div>
    </div>

<script type="text/javascript">


$(document).ready(function() {
	
	$.ajax({
		url : "/json/learningResultAnalysis/getResultAnalysisInfo"
		, method : 'POST'
		, contentType : 'application/json'
		, data : JSON.stringify({
			lrnExcnSn : $('#lrnExcnSn').val()
			, testHistSn : $('#testHistSn').val()
			})
		, success : function(data){
			
			if (data.uldModelYn == "Y"){
				$("#lrnNm").val(data.lrnInfo.lrnNm);
				$("#lrnTime").val(data.lrnInfo.diffSecond + "s");
				$("#lrnModelId").val(data.lrnInfo.lrnGroupSn + "_" + data.lrnInfo.lrnExcnSn);
				$("#traingBgngDt").val(data.lrnInfo.lrnExcnBgngDt + " (" + data.lrnInfo.regUserId + ")");
				
				$("#testLog").val(data.testLog);
				
				$("#trainDataDownBtn").hide();
				$("#testDataDownBtn").hide();
				$("#uldModelNone").hide();
				
			} else {
			
				$("#resultFlpth").val(data.lrnInfo.resultFlpth);
				$("#traingDatasetSn").val(data.lrnInfo.traingDatasetSn);
				$("#testDatasetSn").val(data.lrnInfo.testDatasetSn);
				
				$("#lrnNm").val(data.lrnInfo.lrnNm);
				$("#accrcyRate").val((data.lrnInfo.accrcyRate * 100).toFixed(2) + " %");
				
				$("#otherScore").val(nvl(data.lrnInfo.recallRate) + " / " + nvl(data.lrnInfo.preciseRate) + " / " + nvl(data.lrnInfo.f1Score));
				$("#traingBgngDt").val(data.lrnInfo.traingBgngDt + " (" + data.lrnInfo.regUserId + ")");
				
				// 소요시간 계산(초 단위)
				/* if (data.lrnInfo.testEndDt) {
					var lrnTime = 0;
				} else {
					var traingBeginDt = data.lrnInfo.traingBgngDt.split(/\s|\-|\:/);
					var testEndDt = data.lrnInfo.testEndDt.split(/\s|\-|\:/);
					var traingBeginTime = new Date(traingBgngDt[0], traingBgngDt[1], traingBgngDt[2], traingBgngDt[3], traingBgngDt[4], traingBgngDt[5]);
					var testEndTime = new Date(testEndDt[0], testEndDt[1], testEndDt[2], testEndDt[3], testEndDt[4], testEndDt[5]);
					var lrnTime = (testEndTime.getTime() - traingBgngTime.getTime()) / 1000;
				} */
				
				$("#lrnTime").val(data.lrnInfo.diffSecond + "s");
				$("#lrnModelId").val(data.lrnInfo.lrnGroupSn + "_" + data.lrnInfo.lrnExcnSn);
				
				
				// 훈련데이터셋 정보
				$("#train_lrnDatasetNm").text(data.lrnInfo.traingLrnDatasetNm);
				$("#train_dataFlpth").text(data.lrnInfo.traingDataOrginlFlpth);
				$("#train_dataLayout").text(data.lrnInfo.traingDataRowCnt + " rows x " + data.lrnInfo.traingDataColCnt + " cols");
				$("#train_trgetValue").text(data.lrnInfo.traingTrgetHderValue);
				
				// 테스트데이터셋 정보
				$("#test_lrnDatasetNm").text(data.lrnInfo.testLrnDatasetNm);
				$("#test_dataFlpth").text(data.lrnInfo.testDataOrginlFlpth);
				$("#test_dataLayout").text(data.lrnInfo.testDataRowCnt + " rows x " + data.lrnInfo.testDataColCnt + " cols");
				$("#test_trgetValue").text(data.lrnInfo.testTrgetHderValue);
				
				// log
				$("#trainLog").val(data.trainLog);
				$("#testLog").val(data.testLog);
				
				
				
				// 훈련데이터 컬럼별 유니크 카운트
				var trainUniqObj = data.trainAnalysisInfo.BY_FEATURE_UNIQUE;
				var trainUniqObjList = new Array(); 
				var trainColumn = new Array(); // 컬럼헤더만
				for(key in trainUniqObj) {
					var obj = new Object();
					obj.name = key;
					obj.value = trainUniqObj[key];
					trainColumn[trainColumn.length] = key;
					trainUniqObjList[trainUniqObjList.length] = obj;
				}
				fnDrawUPieChart("dv_trainUniqCharts", trainUniqObjList);
				
				// 훈련데이터셋 정보(컬럼헤더)
				var colName = ""
				for(var i=0; i<trainColumn.length; i++) {
					if (i==trainColumn.length-1) {
						colName += trainColumn[i]
					} else {
						colName += trainColumn[i] + ", "	
					}
				}
				$("#train_dataHder").text(colName);
				
				
				
				// 훈련데이터 타겟별 카운트
				var trainTargetObj = data.trainAnalysisInfo.BY_LABEL;
				var trainTargetObjList = new Array();
				for(key in trainTargetObj) {
					var obj = new Object();
					obj.name = key;
					obj.value = trainTargetObj[key];
					trainTargetObjList[trainTargetObjList.length] = obj;
				}
				fnDrawRPieChart("dv_trainTargetCharts", trainTargetObjList);
				
				
				
				// 훈련데이터 박스플롯
				fnDrawBoxPlot("dv_trainBoxPlot", data.trainAnalysisInfo.BY_FEATURE_CONTENTS)
				
				
				
				// 테스트데이터 컬럼별 유니크 카운트
				var testUniqObj = data.testAnalysisInfo.BY_FEATURE_UNIQUE;
				var testUniqObjList = new Array(); 
				var testColumn = new Array(); // 컬럼헤더만
				for(key in testUniqObj) {
					var obj = new Object();
					obj.name = key;
					obj.value = testUniqObj[key];
					testColumn[testColumn.length] = key;
					testUniqObjList[testUniqObjList.length] = obj;
				}
				fnDrawUPieChart("dv_testUniqCharts", testUniqObjList);
				
				// 테스트데이터셋 정보(컬럼헤더)
				var colName = ""
				for(var i=0; i<testColumn.length; i++) {
					if (i==testColumn.length-1) {
						colName += testColumn[i]
					} else {
						colName += testColumn[i] + ", "	
					}
				}
				$("#test_dataHder").text(colName);
				
				
				
				// 테스트데이터 타겟별 카운트
				var testTargetObj = data.testAnalysisInfo.BY_LABEL;
				var testTargetObjList = new Array(); 
				for(key in testTargetObj) {
					var obj = new Object();
					obj.name = key;
					obj.value = testTargetObj[key];
					testTargetObjList[testTargetObjList.length] = obj;
				}
				fnDrawRPieChart("dv_testTargetCharts", testTargetObjList);
				
				
				
				// 테스트데이터 박스플롯
				fnDrawBoxPlot("dv_testBoxPlot", data.testAnalysisInfo.BY_FEATURE_CONTENTS)
				
				
				// 각 클래스별 분류 정확도
				var resultLabList = new Array();
				var resultValList = new Array();
				for (key in data.resultAnalysisInfo.BY_RESULT_CLC) {
					resultLabList[resultLabList.length] = key;
					predictMap = data.resultAnalysisInfo.BY_RESULT_CLC[key];
					var keySum = 0;
					var keyVal = 0;
					for (key2 in predictMap) {
						keySum += predictMap[key2];
						if (key == key2) {
							keyVal = predictMap[key2]
						}
					}
					
					resultValList[resultValList.length] = (keyVal / keySum * 100).toFixed(2); 
				}
				console.log(data.resultAnalysisInfo.BY_RESULT_CLC)
				if (resultLabList.length < 5) {
	        		$("#dv_truePredictRate").attr("style", "height:200px;");
				} else if (resultLabList.length < 10) {
					$("#dv_truePredictRate").attr("style", "height:400px;");
				} else if (resultLabList.length < 20) {
					$("#dv_truePredictRate").attr("style", "height:600px;");
				} else if (resultLabList.length < 30) {
					$("#dv_truePredictRate").attr("style", "height:800px;");
				} else {
					$("#dv_truePredictRate").attr("style", "height:1000px;");
				}
				fnDrawAccuracyChart("dv_truePredictRate", resultLabList, resultValList);
				
				
				
				// 각 클래스별 예측 행렬
				var cm = '<table class="list">';
				cm += '<thead>'
				cm += '<tr>';
				cm += '<th style="min-width:100px; background-color: #5986c2;">';
				cm += '</th>';
				for (var i in resultLabList) {
					cm += '<th style="min-width:100px; background-color: #5986c2; color:#fff; border-left:1px solid #e6e8ea;">';
					cm += resultLabList[i];
					cm += '</th>';
				}
				cm += '</thead>'
				cm += '<tbody>';
				cm += '</tr>';
				for (var i in resultLabList) {
					cm += '<tr>';
					cm += '<th style="background-color: #5986c2; color:#fff;">';
					cm += resultLabList[i];
					cm += '</th>';
					const mapRow = data.resultAnalysisInfo.BY_RESULT_CLC[resultLabList[i]];
					for (var j in resultLabList) {
						cm += '<td>';
						cm += mapRow[resultLabList[j]];
						cm += '</td>';
					}
					cm += '</tr>';
				}
				cm += '</tbody>';
				cm += '</table>';
				$("#cm_data_table").append(cm);
				
				$("#cm_data_table tbody tr").each(function (trIndx){
					$(this).find("td").each(function (tdIndx){
						if (trIndx + 1 == tdIndx + 1) {
							$(this).css("background-color", "gainsboro");
						} else if ($(this).text() != 0) {
							$(this).css("background-color", "indianRed");
						}
					});
				});
				
				
				
				
				
				
				// 예측 실패 목록
				var table = '<table class="list">';
	        	table += '<thead height:20px>';
	        	table += '<tr>';
	        	for (var header = 0; header < data.resultAnalysisInfo.BY_RESULT_HEADER.length; header++){
	        		table += '<th style="min-width:100px;">';
	        		table += data.resultAnalysisInfo.BY_RESULT_HEADER[header];
	        		table += '</th>';
	        	}
	        	table += '</tr>';
	        	table += '</thead>';
	        	table += '<tbody>';
	        	for (var row = 0; row < data.resultAnalysisInfo.BY_RESULT_CONTENTS.length; row++) {
	        		table += '<tr>';
	        		var bodyListRow = data.resultAnalysisInfo.BY_RESULT_CONTENTS[row];
	        		for (key in data.resultAnalysisInfo.BY_RESULT_HEADER) {
	        			var bodykey = data.resultAnalysisInfo.BY_RESULT_HEADER[key];
	        			table += '<td>';
	        			table += bodyListRow[bodykey];
	        			table += '</td>';
	        		}
	        		table += '</tr>';
	        	}
	        	table += '</tbody>';
	        	table += '</table>';
	        	
	        	$("#tb_data_table").append(table); 
		
	       		if($("#tb_data_table").find("tbody tr").length == 0) {
	       			$("#acc_div").css("display", "none");
	       			$("#cm_div").css("display", "none");
	       			$("#fail_div").css("display", "none");
	       		} else {
	       			$("#tb_data_table").find("tr").show();
	       		}
	        	
	        	
	        	
	        	// 모델의 변수 중요도
	        	if (data.modelAttrIpt.length > 0) {
	        		var modelAttrIptHtml = "<tr><td colspan='3'>";
	        		modelAttrIptHtml += "<div id='dv_featureImportance' style='width:100%;'></div>";
	        		modelAttrIptHtml += "</td><td colspan='3'>";
	        		modelAttrIptHtml += "<div id='dv_featureImportancePie' style='height:500px;'></div></td></tr>";
					
	        		$("#traindata_anal tbody").append(modelAttrIptHtml);
	        		
	        		// feature importance
	            	if (data.modelAttrIpt.length < 5) {
	            		$("#dv_featureImportance").attr("style", "float:left;width:100%;height:200px;");
	    			} else if (data.modelAttrIpt.length < 10) {
	    				$("#dv_featureImportance").attr("style", "float:left;width:100%;height:400px;");
	    			} else if (data.modelAttrIpt.length < 20) {
	    				$("#dv_featureImportance").attr("style", "float:left;width:100%;height:600px;");
	    			} else if (data.modelAttrIpt.length < 30) {
	    				$("#dv_featureImportance").attr("style", "float:left;width:100%;height:800px;");
	    			} else {
	    				$("#dv_featureImportance").attr("style", "float:left;width:100%;height:1000px;");
	    			}
	    			fnDrawFeatureImportance("dv_featureImportance", data.modelAttrIpt);
	    			fnDrawFeatureImportancePie("dv_featureImportancePie", data.modelAttrIpt);
	        	}
			}
		}
	});
	
});




function fnDrawUPieChart(id, dataList) {
	var option;
	option = {title: {text: 'Feature Unique Count', subtext: '', left: 'center'}
		, tooltip: {trigger: 'item'}
		// , legend: {orient: 'vertical', left: 'left'}
		, series: [{name: 'Feature Unique Count'
			, type: 'pie'
			, radius: '50%'
			, data: dataList
			, emphasis: {itemStyle: {shadowBlur: 10
				, shadowOffsetX: 0
				, shadowColor: 'rgba(0, 0, 0, 0.5)'
				}
			}
		}]
	};

	var chartDom = document.getElementById(id);
	var myChart = echarts.init(chartDom);
	option && myChart.setOption(option);	
	
}


function fnDrawRPieChart(id, dataList) {
	var option;
	option = {title: {text: 'Label(target) Rate', subtext: '', left: 'center'}
		, tooltip: {trigger: 'item'}
		// , legend: {orient: 'vertical', left: 'left'}
		, series: [{name: 'Target Count'
			, type: 'pie'
			, radius: '50%'
			, data: dataList
			, emphasis: {itemStyle: {shadowBlur: 10
				, shadowOffsetX: 0
				, shadowColor: 'rgba(0, 0, 0, 0.5)'
				}
			}
		}]
	};

	var chartDom = document.getElementById(id);
	var myChart = echarts.init(chartDom);
	option && myChart.setOption(option);	
	
}


function fnDrawBoxPlot(id, data) {
	var option;
	
	option = {title: [{text: 'Feature Boxplot'
				,left: 'center'}
			
			]
		, dataset: [{source: data}
			, {transform: {type: 'boxplot', config: {itemNameFormatter: 'exer {value}'}}
			}
			, {fromDatasetIndex: 1, fromTransformResult: 1}
		]
		, tooltip: {trigger: 'item', axisPointer: {type: 'shadow'}}
		, grid: {left: '10%', right: '10%', bottom: '15%'}
		, xAxis: {type: 'category'
			, axisLabel: {show:true}
			, boundaryGap: true
			, nameGap: 10
			, splitArea: {show: false}
			, splitLine: {show: false}
			}
		, yAxis: {type: 'value'
			, name: 'Data Rate'
			, splitArea: {show: true}}
		, series: [{name: 'boxplot', type: 'boxplot', datasetIndex: 1}
			, {name: 'outlier', type: 'scatter', datasetIndex: 2}
		]
	};
	
	var chartDom = document.getElementById(id);
	var myChart = echarts.init(chartDom);
	option && myChart.setOption(option);
}


function fnDrawFeatureImportance(id, data){
	
	var label = new Array();
	var value = new Array();
	
	for (row = 0; row < data.length; row++) {
		var dataRow = data[row];
		// console.log(dataRow);
		label[label.length] = dataRow["resultAttrbNm"];
		value[value.length] = dataRow["resultAttrbRate"];
	}
	
	var option;
	
	option = {title: {text: 'Feature Importance', left: 'center'}
		, tooltip: {trigger: 'axis'
			, axisPointer: {type: 'shadow'}}
		, xAxis: {type: 'value'}
		, yAxis: {type: 'category'
			, data: label}
		, series: [{data: value
			, type: 'bar'
			, showBackground: true
			, backgroundStyle: {color: 'rgba(180, 180, 180, 0.2)'}
		}]
	};
	
	var chartDom = document.getElementById(id);
	var myChart = echarts.init(chartDom);
	option && myChart.setOption(option);
}


function fnDrawFeatureImportancePie(id, data) {
	var option;
	
	var dataListObj = new Array();
	for (row = 0; row < data.length; row++) {
		var obj = new Object();
		var dataRow = data[row];
		obj.name = dataRow["resultAttrbNm"]
		obj.value = dataRow["resultAttrbRate"]
		dataListObj[dataListObj.length] = obj;
	}
	option = {title: {text: 'Feature Importance', subtext: '', left: 'center'}
		, tooltip: {trigger: 'item'}
		//, legend: {orient: 'vertical', left: 'left'}
		, series: [{name: 'Importance Value'
			, type: 'pie'
			, radius: '50%'
			, data: dataListObj
			, emphasis: {itemStyle: {shadowBlur: 10
				, shadowOffsetX: 0
				, shadowColor: 'rgba(0, 0, 0, 0.5)'
				}
			}
		}]
	};

	var chartDom = document.getElementById(id);
	var myChart = echarts.init(chartDom);
	option && myChart.setOption(option);	
}


function fnDrawAccuracyChart(id, resultLabList, resultValList) {
	var option;
	
	option = {
			title: {
			    text: 'Accuracy of Each Class',
			    subtext: 'Class Count : ' + resultValList.length,
			    left: 10
			  }
		, tooltip: {trigger: 'axis'
			, axisPointer: {type: 'shadow'}}
		, legend: {orient: 'vertical'
			, x: 'right'
			, y: 'center'
			, data: [resultLabList]}
		, grid: {left: '3%'
			, right: '4%'
			, bottom: '3%'
			, containLabel: true}
		, xAxis: {type: 'value'}
		, yAxis: {type: 'category'
			, data: resultLabList
		}
		, series: [{name: "정확도"
				, type: 'bar'
				, showBackground: true
				, data: resultValList}]
	};
	
	var chartDom = document.getElementById(id);
	var myChart = echarts.init(chartDom);
	option && myChart.setOption(option);
}




function fnExit() {
	window.close();
}


</script>
</body>
</html>
