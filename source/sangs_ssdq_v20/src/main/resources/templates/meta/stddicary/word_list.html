<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" layout:decorator="layout/mainLayout">
<head>
	<!-- head inclue -->
	<th:block th:replace="fragments/head_inc :: head_inc" />
</head>
<body>
	<div id="wrap">
		<div class="container">
			<div id="content">

				<div class="page_info_area">
					<div class="left">
						<div class="location_area">
							<a href="#" class="bookmark active" title="즐겨찾기"></a>
							<ul>
								<li>홈</li>
								<li>데이터표준화관리</li>
								<li>용어</li>
							</ul>
						</div>
						<div class="title_area">
							<p>용어</p>
							<a href="#" class="reload_btn" title="새로고침">새로고침</a>
							<a href="#"	class="help_btn" title="도움말">도움말</a>
						</div>
					</div>
					<div class="right">
						<div class="button_area" id="wordBtnList" style="display:none;" >
							<button class="btn" title="엑셀다운로드" onclick="fnWordDownloadExcel()">엑셀다운로드</button>
							<button class="btn" title="엑셀업로드" onclick="fnWordBundleRegBtnModal()">엑셀업로드</button>
							<button class="btn" title="신규등록" onclick="fnWordRegBtnModal('R'); return false;">신규등록</button>
							<button class="btn" title="조회" onclick="fnWordSearch(); return false;" id="btn_search">조회</button>
						</div>
					</div>
				</div><!-- page_info_area -->

				<div class="content_area">
					<div class="division20">
						<div class="search_wrap">
							<table class="search fixed">
								<colgroup>
									<col style="width: 100px;" />
									<col style="width: auto;" />
									<col style="width: 60px;" />
									<col style="width: 100px;" />
									<col style="width: auto;" />
									<col style="width: 60px;" />
									<col style="width: 100px" />
									<col style="width: auto;" />
								</colgroup>
								<tbody>
									<tr>
										<th scope="row"><label for="wordAprvSttusCdChkBox">승인상태</label></th>
										<td>
											<div id="wordAprvSttusCdChkBox" style="display:none;">
											</div>
										</td>
										<td></td>
										<th scope="row"><label for="wordPrhibtYn">금칙어구분</label></th>
										<td>
											<div class="selectbox">
												<select id="wordPrhibtYn" name="wordPrhibtYn">
													<option value="">전체</option>
													<option value="Y">Y</option>
													<option value="N">N</option>
												</select>
											</div>
										</td>
										<td></td>
										<th scope="row"><label for="wordTyCd">용어구분</label></th>
										<td>
											<div class="selectbox">
												<select id="wordTyCd" name="wordTyCd">
													<option value="">전체</option>
												</select>
											</div>
										</td>		
										
									</tr>
									<tr>
										<th scope="row"><label for="wordNm">용어명</label></th>
										<td>
											<input type="text" class="in_w100" id="wordNm" name="wordNm" placeholder="검색어 기본 EQUAL검색, WILDCARD(*,?) 검색가능" />
										</td>
										<td></td>
										<th scope="row"><label for="wordEngAbrvNm">약어명</label></th>
										<td>
											<input type="text" class="in_w100" id="wordEngAbrvNm" name="wordEngAbrvNm" style="text-transform: uppercase;" placeholder="검색어 기본 EQUAL검색, WILDCARD(*,?) 검색가능"  />
										</td>
										<td></td>
										<th scope="row"><label for="wordEngNm">영문명</label></th>
										<td>
											<input type="text" class="in_w100" id="wordEngNm" name="wordEngNm" style="text-transform: uppercase;" />
										</td>
									</tr>
									<tr>
										<th scope="row"><label for="wordDomnGroupCode">도메인그룹</label></th>
										<td>
											<div class="selectbox">
												<select id="wordDomnGroupCode" name="wordDomnGroupCode">
													<option value="">전체</option>
												</select>
											</div>
										</td>
										<td></td>
										<th scope="row"><label for="wordRelWordNm">연관어</label></th>
										<td>
											<input type="text" class="in_w100" id="wordRelWordNm" name="wordRelWordNm" />
										</td>	
										<td></td>						
										<th scope="row"><label for="wordCn">용어설명</label></th>
										<td>
											<input type="text" class="in_w100" id="wordCn" name="wordCn" />
										</td>		
									</tr>
								</tbody>
							</table>
						</div><!-- search_wrap -->
					</div><!-- division20 -->

					<div class="division20">
						<div class="row marginb25">
							<div class="left" data-width="0">
								<div class="card">
									<table class="list fixed" id="tb_wordlist_table">
										<colgroup>
											<col style="width: 60px;" />
											<col style="width: 60px;" />
											<col style="width: 170px;" />
											<col style="width: 170px;" />
											<!--<col style="width: auto;" />-->
											<col style="width: 80px;" />
											<col style="width: 130px;" />
											<col style="width: 40px;" />
											<col style="width: 70px;" />
										</colgroup>
										<thead>
											<tr>
												<th>No</th>
												<th>용어구분</th>
												<th>용어명</th>
												<th>영문약어명</th>
												<!--<th>영문명</th>-->
												<th>도메인그룹</th>
												<th>도메인명</th>
												<th>금칙어</th>
												<th>승인상태</th>
											</tr>
										</thead>
										<tbody>
											<tr class="fwk_templete_row">
												<td>#{FWK_TR_NO}
													<input type="hidden" name="wordSn" value="#{wordSn}" />
												</td>
												<td>#fn{fnBindCodeListObj('WRDCDTY', 'text', '#{wordTyCd}', '')}</td>
												<td class="alignl">#{wordNm}</td>
												<td class="alignl">#{wordEngAbrvNm}</td>
												<!--<td class="alignl">#{wordEngNm}</td>-->
												<td>#{domnGroupNm}</td>
												<td>#{domnNm}</td>
												<td>#{prhibtYn}</td>
												<td>#fn{fnBindCodeListObj('CONFMCDTY', 'text', '#{aprvSttusCd}', '')}<br>
												#fn{fnTdAprvSttusCdChkPrcsSeCd('#{prcsSeCd}')}
												</td>
											</tr>
										</tbody>
									</table>
									<div class="pagination_area marginb25" id="dv_paging">
									</div><!-- pagination_area -->
								</div><!-- card -->
							</div><!-- left -->
							
							<div class="right" data-width="550">
								<div class="view_wrap">
								
									<div class="tbl_top">
										<p class="tit v2 margin0"><span>용어정보</span></p>
										<input type="hidden" name="wordAprvSttusCdHide" id="wordAprvSttusCdHide" />
										<input type="hidden" name="wordSnHide" id="wordSnHide" />
										<div class="btn_wrap" id="wordReqBtnList" style="display:none !important;" >
											<div th:if="${session.STANDARD_USER_SESSION_KEY.userAttrMap[isApprover]} == 'Y'">
												<button class="btn sm" id="acceptWordBtn" onclick="fnRequestWordBtn('A'); return false;">승인</button>
		   										<button class="btn sm" id="returnWordBtn" onclick="fnRequestWordBtn('RT'); return false;">반려</button>
		   										<button class="btn sm" id="deleteWordBtn" onclick="fnRequestWordBtn('D'); return false;">삭제</button>
											</div>
											<div th:unless="${session.STANDARD_USER_SESSION_KEY.userAttrMap[isApprover]} == 'Y'">
												<button class="btn sm" id="acceptWordBtn" onclick="fnRequestWordBtn('A'); return false;">승인요청</button>
										    	<button class="btn sm" id="deleteWordBtn" onclick="fnRequestWordBtn('D'); return false;">삭제요청</button>
											</div>
											<button class="btn sm" id="wordModifyBtn" onclick="fnWordRegBtnModal('M'); return false;">수정</button>
										</div>
									</div><!-- tbl_top -->
									
									<table class="view">
										<colgroup>
											<col style="width: 110px;" />
											<col style="width: auto;" />
											<col style="width: 110px;" />
											<col style="width: auto;" />
										</colgroup>
										<tbody>
											<tr>
												<th>용어구분</th><td id="dtlview_wordtycdnm"></td>
												<th>승인상태</th><td id="dtlview_wordaprvsttuscdnm"></td>
												
											</tr>
											<tr>
												<th>용어명</th><td id="dtlview_wordnm"></td>
												<th>영문약어명</th><td id="dtlview_wordengabrvnm"></td>
											</tr>
											<tr>
												<th>영문명</th><td id="dtlview_wordengnm" colspan="3"></td>
											</tr>
											<tr>
												<th>금칙어</th><td id="dtlview_wordprhibtyn"></td>
												<th>연관어</th><td id="dtlview_wordrelwordnm"></td>
											</tr>
											<tr>
												<th>도메인그룹</th><td id="dtlview_worddomngroupnm"></td>
												<th>도메인명</th><td id="dtlview_worddomnnm"></td>
											</tr>
											<tr>
												<th>용어설명</th><td colspan="3" id="dtlview_wordcn"></td>
											</tr>										
										</tbody>
									</table>
									
									<div class="tbl_top margint20">
										<p class="tit v2 margin0"><span>표준변경영향도</span></p>
										<div class="btn_wrap">
											<button class="btn sm" onclick="fnChangeWordEffectBtnModal('word');">상세 </button>
										</div>
									</div>
									<div class="tbl_wrap" data-height="300">
										<table id="tb_wordeffectlist_table" class="list margin0">
											<colgroup>
												<col style="width: 80px;" />
												<col style="width: auto;" />
												<col style="width: auto;" />
												<!--
												<col style="width: auto;" />
												-->
											</colgroup>
											<thead>
												<tr>
													<th>사용위치</th>
													<th>대상명</th>
													<th>영문약어명</th>
													<!--
													<th>모델링적용여부</th>
													-->
												</tr>
											</thead>											
											<tbody>
												<tr class="fwk_templete_row">
													<td>단어</td>
													<td>#{wrdNm}</td>
													<td>#{wrdEngAbrvNm}</td>
													<!--
													<td></td>
													-->
												</tr>
											</tbody>
										</table>
									</div>
									
									<div class="tbl_top margint20">
										<p class="tit v2 margin0"><span>변경승인이력</span></p>
										<div class="btn_wrap">
											<button class="btn sm" onclick="fnChangeWordHistBtnModal('word');">상세</button>
										</div>
									</div>
									<div class="tbl_wrap" data-height="300">
										<table id="tb_wordhistlist_table" class="list margin0">
											<colgroup>
												<col style="width: 110px;" />
												<col style="width: auto;" />
												<col style="width: 110px;" />
												<col style="width: auto;" />
												<col style="width: auto;" />
											</colgroup>
											<thead>
												<tr>
													<th>변경일</th>
													<th>처리</th>
													<th>항목</th>
													<th>변경전</th>
													<th>변경후</th>
												</tr>
											</thead>											
											<tbody>
												<tr class="fwk_templete_row">
													<td>#{chgDt2}</td>
													<td>#{prcsSeCdNm}</td>
													<td>#{chgIemNm}</td>
													<td>#{bfchgCn}</td>
													<td>#{aftchCn}</td>
												</tr>
											</tbody>
										</table>
									</div>
									
								</div><!-- view_wrap -->
							</div><!-- right -->
						</div><!-- row -->
						
					</div><!-- division20 -->
				</div><!-- content_area -->
			</div><!-- content -->
		</div><!-- container -->
	</div><!-- wrap -->

<!-- 신규등록 및 수정  -->
<div class="popup layer" id="wordreginfo_modal">
	<th:block th:replace="meta/stddicary/word_list_reg_inc :: word_list_reg_inc" />
</div>

<!-- 표준변경영향도 상세 -->
<div class="popup layer" id="changeeffectlist_modal" style="width:1500px;">
	<th:block th:replace="meta/stddicary/std_change_effect_list_inc :: std_change_effect_list_inc" />
</div>

<!-- 변경승인이력 상세 -->
<div class="popup layer" id="changehistlist_modal" style="width:1500px;">
	<th:block th:replace="meta/stddicary/std_change_hist_list_inc :: std_change_hist_list_inc" />
</div>

<!-- 엑셀업로드 -->
<div class="popup layer" id="worddatastdbundle_modal" style="height :700px; width:1500px;">
	<th:block th:replace="meta/stddicary/word_datastd_bundle_inc :: word_datastd_bundle_inc" />
</div>


<!--현 페이지를 조회 팝업으로 사용시  SEARCH_POP 값으로 들어옴 -->
<input type="hidden" id="p_pageMode" name="p_pageMode" th:if="${#maps.containsKey(paramMap, 'pageMode')}"  th:value="${paramMap.pageMode}" /> 


<script type="text/javascript">

$(document).ready(function() {
	
		
	try {
		// 왼쪽 메뉴 선택 처리 (링크로 해당 페이지 들어온경우 오른쪽 메뉴를 선택 처리 한다. )
		parent.fnSelectLeftMenu(location.pathname);
	} catch(e) {}
	
	
	// 현 페이지를 조회 팝업으로 사용시  SEARCH_POP 값으로 들어옴
	if($("#p_pageMode").val() != undefined && $("#p_pageMode").val() == "SEARCH_POP") {
		// 조회 버튼만 보이도록 처리 
		$(".button_area").find("button").hide();
		$("#btn_search").show();
		
		// 오른쪽 영역 안보이도록 처리 
		$(".content_area").find(".right").hide();
	} 
	
	var stdSetSn = parent.$("#topgv_stdSetSn").val();
	
	if(!fnChkStdSet(stdSetSn)){
		return;
	} else {
		//$("#wordReqBtnList").show();
		$("#wordBtnList").show();
	}
	
 	$("#wordNm, #wordEngNm, #wordEngAbrvNm, #wordTyCd, #wordDomnGroupCode, #wordRelWordNm, #wordCn").on("keyup", function(event) {
		if (event.keyCode == 13)
			fnWordSearch();
	});

	fnWordInit();
	$("#wordNm").focus();
});

function fnWordInit() {
	
	new CodeBinder()
		.setCommonCode("CONFMCDTY", "wordAprvSttusCdChkBox", "checkbox")
		.setCommonCode("WRDCDTY", "wordTyCd")
		.setSqlCode("meta_code.selectDomnGroupCodeList","wordDomnGroupCode", "select")
		.setLoadCallbackFunc("fnWordSearch()")
		.load();
}

//검색 조건
var getWordSearchParamObj = function(){
	var aprvSttusCdArrList = [];
	$("#wordAprvSttusCdChkBox :checked").each(function(){
		aprvSttusCdArrList.push($(this).val());
	});

	var paramObj = {
			aprvSttusCdArrList
			, prhibtYn : $("#wordPrhibtYn").val()
			, wordNm : $("#wordNm").val()
			, wordEngNm : fnUnderbarChgVar($("#wordEngNm").val())
			, wordEngAbrvNm : $("#wordEngAbrvNm").val()
			, wordTyCd : $("#wordTyCd").val()
			, domnGroupCode : $("#wordDomnGroupCode").val()
			, relWordNm : fnUnderbarChgVar($("#wordRelWordNm").val())
			, wordCn : fnUnderbarChgVar($("#wordCn").val())
	};
	return paramObj;
};

//조회
function fnWordSearch(pageNum) {
	if (!pageNum)
		pageNum = 1;
	
	var searchParamObj = getWordSearchParamObj();
	searchParamObj["pageNum"]= pageNum;
	
	$.ajax({
		url : "/json/stdDicary/getStdDicaryWordList"
		, method : "POST"
		, contentType : 'application/json'
		, data : JSON.stringify(searchParamObj)
		, success : function(data) {

			fnBindTableValue("tb_wordlist_table", data.list, data.pagingInfo);

			fnSetPaging("dv_paging", data.pagingInfo, "fnWordSearch");

			// 요청건과 반려 건 있을때 조회 조건에 노출 처리
			fnSetSttusCntDisp(data.sttusCntInfoList);
			
		
			fnSelectTrEvent("#tb_wordlist_table tbody tr", function(rtnObj) {
				show_loading_bar_flag = false;
				fnStartMainLoading();
				
				fnViewDetail($(rtnObj).find("input[name=wordSn]").val());
				fnChangeEffectByWordList($(rtnObj).find("input[name=wordSn]").val());
				fnChangeWordHistList($(rtnObj).find("input[name=wordSn]").val());
				
				fnStopMainLoading();
				show_loading_bar_flag = true;
				});
			fnWordInitDtlView();
			
			fnAprvSttusCdChkBox();
		}
	});
}

//승인상태 삭제 체크박스 hide 처리 
function fnAprvSttusCdChkBox(){
	
	$("#wordAprvSttusCdChkBox").find("#CONFMCDTY_DELETE").hide();
	$("#wordAprvSttusCdChkBox").find("label[for=CONFMCDTY_DELETE]").hide();
	$("#wordAprvSttusCdChkBox").show();
	
}

//승인상태 삭제 체크박스 hide 처리 
function fnTdAprvSttusCdChkPrcsSeCd(prcsSeCd){
	if(prcsSeCd=="DEL"){
		return "(삭제)";
	} else {
		return "";
	}
}


// 요청건과 반려 건 있을때 조회 조건에 노출 처리
function fnSetSttusCntDisp(sttusCntInfoList) {

	var reqCnt = 0;
	var rtnCnt = 0;
	for(var i = 0 ; i < sttusCntInfoList.length ; i++) {
		var item = sttusCntInfoList[i]
		if(item.aprvSttusCd == "REQUEST")
			 reqCnt = item.cnt;
		if(item.aprvSttusCd == "RETURN")
			 rtnCnt = item.cnt;
	}
	
	$(".cl_sttus_cnt_s").remove();
	
	if(reqCnt > 0) {
		$("#wordAprvSttusCdChkBox").find("label").each(function() {
			if($(this).attr("for") == "CONFMCDTY_REQUEST") {
				$(this).append(' <font color="red" class="cl_sttus_cnt_s">('+reqCnt+')</font>');
			}
		});
	}
	if(rtnCnt > 0) {
		$("#wordAprvSttusCdChkBox").find("label").each(function() {
			if($(this).attr("for") == "CONFMCDTY_RETURN") {
				$(this).append(' <font color="red" class="cl_sttus_cnt_s">('+rtnCnt+')</font>');
			}
		});
	}
}

//표준변경영향도 조회
function fnChangeEffectByWordList(wordSn) {
	var effectLocation = "word";
	
	$.ajax({
		url : "/json/stdDicary/getChangeEffectByList"
		, method : "POST"
		, contentType : 'application/json'
		, data : JSON.stringify({
			effectLocation : effectLocation
			, wordSn : wordSn
			, cnt : 10
		})
		, success : function(data) {
			fnBindTableValue("tb_wordeffectlist_table", data.wrdList);
		}
	});
}

// 변경 승인 이력 
function fnChangeWordHistList(wordSn) {
	var histLocation = "word";

	$.ajax({
		url : "/json/stdDicary/getStdDicaryStdChangeHistList"
		, method : "POST"
		, contentType : 'application/json'
		, data : JSON.stringify({
			histLocation : histLocation
			, wordSn : wordSn
			, cnt : 10
		})
		, success : function(data) {

			fnBindTableValue("tb_wordhistlist_table", data.list);

		}
	});

}

//표준변경영향도 상세
function fnChangeWordEffectBtnModal(location) {
	
	var wordSn = fnSelectTrHiddenValue("tb_wordlist_table", "wordSn");
	
	if (!wordSn) {
		alert("선택한 용어정보가 없습니다.");
		return;
	}
 	$("#effectSn").val(wordSn);
	$("#effectLocation").val(location);
	fnShowModal("changeeffectlist_modal");
	
	fnEffectSearch();
}

// 변경승인이력 상세
function fnChangeWordHistBtnModal(location) {
	
	var wordSn = fnSelectTrHiddenValue("tb_wordlist_table", "wordSn");
	
	if (!wordSn) {
		alert("선택한 용어정보가 없습니다.");
		return;
	}
	
	$("#histSn").val(wordSn);
	$("#histLocation").val(location);
	
	// fnChangeSelectVal("histSltDt");
	$("#histSltDt").find("option[value='']").prop("selected", true);
	$("#histBeginDtFrom").val("");
	$("#histBeginDtTo").val("");

	// fnChangeSelectVal("histSltText");
	$("#histSltText").find("option[value='']").prop("selected", true);
	$("#histSearchText").val("");
	
	fnShowModal("changehistlist_modal");
	fnHistSearch();

}

// 단어정보 상세
function fnViewDetail(wordSn) {

	$.ajax({
		url : "/json/stdDicary/getStdDicaryWordInfo"
		, method : "POST"
		, contentType : 'application/json'
		, data : JSON.stringify({
			wordSn : wordSn
		})
		, success : function(data) {
			// 단어 상세 정보
			var wordInfo = data.info;
			$("#dtlview_wordtycdnm").text(wordInfo.wordTyCdNm);
			$("#dtlview_worddomngroupnm").text(wordInfo.domnGroupNm);
			$("#dtlview_worddomnnm").text(wordInfo.domnNm);
			$("#dtlview_wordnm").text(wordInfo.wordNm);
			$("#dtlview_wordaprvsttuscdnm").text(wordInfo.aprvSttusCdNm);
			$("#dtlview_wordcn").text(wordInfo.wordCn);
			$("#dtlview_wordengnm").text(wordInfo.wordEngNm);
			$("#dtlview_wordengabrvnm").text(wordInfo.wordEngAbrvNm);
			$("#dtlview_wordprhibtyn").text(wordInfo.prhibtYn);
			$("#dtlview_wordrelwordnm").text(wordInfo.relWordNm);
			
			$("#wordAprvSttusCdHide").val(wordInfo.aprvSttusCd);
			$("#wordSnHide").val(wordInfo.wordSn);
			
			var stdSetTyCd = wordInfo.stdSetTyCd;
			var prcsSeCd = wordInfo.prcsSeCd;
			
			fnMngBtnStng(stdSetTyCd, prcsSeCd);
		}
	});
}

// 수정 및 신규등록 모달
function fnWordRegBtnModal(pmode) {
	
	fnShowModal("wordreginfo_modal");
	
	var wordSn = fnSelectTrHiddenValue("tb_wordlist_table", "wordSn");
	
	if (pmode == "R") {
		$("#wordSnHide").val("");
		fnWordInitDtlView();
	}
	
	fnRegWordSearch(wordSn, pmode);
	
}

// 표준사전 단어 엑셀 다운로드
function fnWordDownloadExcel() {
	
	var searchParamObj = getWordSearchParamObj();
	fnCommFileDownByUrl("/exceldown/stdDicary/getStdDicaryWordExcelDown","용어목록", JSON.stringify(searchParamObj));

}

// 정보 초기화
function fnWordInitDtlView() {
	fnClearSelectTrEvent("#tb_wordlist_table tbody tr");
	//용어 정보 상세
	$("#dtlview_wordtycdnm").empty();
	$("#dtlview_wordaprvsttuscdnm").empty();
	$("#dtlview_wordnm").empty();
	$("#dtlview_wordengnm").empty();
	$("#dtlview_wordengabrvnm").empty();
	$("#dtlview_wordprhibtyn").empty();
	$("#dtlview_wordrelwordnm").empty();
	$("#dtlview_worddomngroupnm").empty();
	$("#dtlview_worddomnnm").empty();
	$("#dtlview_wordcn").empty();
	
	$('#tb_wordeffectlist_table tbody .fwk_tr_no_row').remove();
	$('#tb_wordeffectlist_table tbody .fwk_data_row').remove();
	$('#tb_wordhistlist_table tbody .fwk_tr_no_row').remove();
	$('#tb_wordhistlist_table tbody .fwk_data_row').remove();

	fnFuncBtnsHide();
}

// 엑셀업로드
function fnWordBundleRegBtnModal() {
	$("#selFile").val("");
	$(".txt_filename").text("선택된 파일 없음")
	$("#subDir").val("");
	$("#savedFileNm").val("");
	$("#totalTargetCnt").text("0건");
	$("#totalClearCnt").text("0건");
	$("#totalErrorCnt").text("0건");
	$("input[name=chkBox]").prop('checked',false);
	$("#tb_filelist_table").width("100%");
	fnShowModal("worddatastdbundle_modal");
	$('#tb_filelist_table tbody .fwk_data_row').remove();
}
//기능 버튼 모두 hide 처리
function fnFuncBtnsHide(){
	$("#acceptWordBtn").hide(); // 승인버튼
	$("#returnWordBtn").hide(); // 반려버튼
	$("#deleteWordBtn").hide(); // 삭제버튼
	$("#wordModifyBtn").hide(); // 수정버튼
}
//승인,반려,삭제 관리
function fnMngBtnStng(stdSetTyCd, prcsSeCd){
	
	var aprvSttusCd = $("#wordAprvSttusCdHide").val();
	fnFuncBtnsHide();
	if (stdSetTyCd != "COMMON"){
		$("#wordModifyBtn").show();
		if (g_isApprover == "Y") {
			if (aprvSttusCd == "APPROVAL") {
				$("#deleteWordBtn").show();
			} else if(aprvSttusCd == "RETURN") {
				$("#acceptWordBtn").show();
				$("#deleteWordBtn").show();
			} else if(aprvSttusCd == "REQUEST") {
				$("#acceptWordBtn").show();
				$("#returnWordBtn").show();
			}
		} else {
			if(aprvSttusCd == "RETURN" ) {
				$("#acceptWordBtn").show();
				$("#deleteWordBtn").show();
			} else if(aprvSttusCd == "REQUEST") {
				if(prcsSeCd == "DEL"){
					$("#deleteWordBtn").hide();					
				} else {
					$("#deleteWordBtn").show();
				}
			}
		}
	}
	
	$("#wordReqBtnList").show();
}


//승인/요청/삭제 버튼
function fnRequestWordBtn(pmode) {

	var wordSn = $("#wordSnHide").val();
	var aprvSttusCd = $("#wordAprvSttusCdHide").val();

	if (g_isApprover == "Y") {
		if (pmode == "RT") {
			if (!confirm("반려 하시겠습니까?")) {
				return;
			}
		} else if (pmode == "D") {
			if (!confirm("삭제 하시겠습니까?")) {
				return;
			}
		} else if (pmode == "A") {
			if (!confirm("승인 하시겠습니까?")) {
				return;
			}
		}
	} else if (g_isApprover == "N") {
		if (pmode == "D") {
			if (!confirm("삭제요청 하시겠습니까?")) {
				return;
			}
		}
	} else {
		return;
	}
	
	var pagingNo ="";
	$("#dv_paging .on a").each(function(){
		pagingNo = $(this).text();
	});
	
	$.ajax({
		url : "/json/stdDicary/saveStdDicaryConfmInfo"
		, method : "POST"
		, contentType : 'application/json'
		, data : JSON.stringify({
			pmode : pmode
			, wordSn : wordSn
			, location : "word"
			, isApprover : g_isApprover
			, aprvSttusCd : aprvSttusCd
		})
		, success : function(data) {
			if (data.resultCd == "OK") {
				alert("저장되었습니다.");
				fnWordSearch(pagingNo)
				//location.reload();
			} else {
				alert("실패하셨습니다.");
				fnWordSearch(pagingNo)
				//location.reload();
			}
		}
	});
}
</script>
</body>
</html>
