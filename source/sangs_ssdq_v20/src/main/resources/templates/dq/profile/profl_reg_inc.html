<html th:lang = "ko" xmlns:th="http://www.thymeleaf.org">

<th:block th:fragment="profl_reg_inc">
	<div class="pop_header">
		<p class="title">프로파일</p>
		<button class="btn_ic btn_pop_close" onclick="fnCloseModal('proflinfo_modal'); return false;">닫기</button>
	</div>
	
	<div class="pop_content">
		<input type="hidden" id="pmode_reg_mod" name="pmode_reg_mod" value=""/>
		<input type="hidden" id="proflsn_mod" name="proflsn_mod" value=""/>
		
		<div class="tbl_top right">
			<div class="btn_wrap">
				<button class="btn sm" id="delProflbtn" onclick="fnDelProfl(); return false;">삭제</button>
				<button class="btn sm" onclick="fnSaveProfl(); return false;">저장</button> 
			</div>
		</div>
		<div class="card">
			<table class="view">
				<colgroup>
					<col width="25%" />
					<col width="auto" />
				</colgroup>
				<tbody>
					<tr>
						<th>* 프로파일명</th>
						<td>
							<input type="text" id="proflnm_reg_mod" name="proflnm_reg_mod" maxlength="100" placeholder="100자 이내로 입력해주세요" >
						</td>
					</tr>
					<tr id="useyn_reg_mod">
						<th>* 사용여부</th>
						<td>
							<div>
								<input type="radio" name="useyn_radio" id="useyn_y" value="Y"/>
								<label for="useyn_y" class="req">Y</label>
								<input type="radio" name="useyn_radio" id="useyn_n" value="N"/>
								<label for="useyn_n" class="req">N</label>
							</div>
						</td>
					</tr>
				</tbody>
			</table>
		</div>
		
	</div><!-- pop_content -->
	
	<div class="pop_footer" style="text-align:center;padding:15px;">
	</div>


<script type="text/javascript">
$(document).ready(function() {
	
});



function fnSaveProfl() {
	if (!fnCheckValid("#proflnm_reg_mod", "프로파일명"))
		return;
	
	if ($("#proflnm_reg_mod").val().length > 200) {
		alert("프로파일명은 200자를 넘을 수 없습니다.");
		return;
	}
	
	if(!confirm("저장하시겠습니까?")){
		return;
	}
	
	var pagingNo ="";
	$("#dv_profl_paging .on a").each(function(){
		pagingNo = $(this).text();
	});
	
	
	$.ajax({
		url: '/json/profileMng/regProflInfo'
		, method: 'POST'
		, contentType: 'application/json'
		, async: false
		, data: JSON.stringify({
			pmode: $("#pmode_reg_mod").val()
			, proflNm: $("#proflnm_reg_mod").val()
			, proflSn: $("#proflsn_mod").val()  // 수정일때만 있음
			, useYn: $("input[name='useyn_radio']:checked").val()
		})
		, success: function(data) {
			if (data.resultCd == "OK") {
				alert("등록되었습니다.");
				fnCloseModal("proflinfo_modal");
				fnSearchProfileList(pagingNo);
			}
		}
	});
}


function fnDelProfl() {
	
	if(!confirm("삭제하시겠습니까?")){
		return;
	}
	
	var pagingNo ="";
	$("#dv_profl_paging .on a").each(function(){
		pagingNo = $(this).text();
	});

	$.ajax({
		url: '/json/profileMng/delProfileInfo'
		, method: 'POST'
		, contentType: 'application/json'
		, data: JSON.stringify({
			proflSn: $("#proflsn_mod").val()
		})
		, success: function(data) {
			if (data.resultCd == "OK") {
				alert("삭제되었습니다.");
				fnCloseModal("proflinfo_modal");
				fnSearchProfileList(pagingNo);
			}
		}
	});
}




</script>

</html>
