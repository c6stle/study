<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" layout:decorator="layout/mainLayout">
<head>
	<!-- head inclue -->
	<th:block th:replace="fragments/head_inc :: head_inc" />
		
</head>
<body>
		<!-- wrap -->
	<div id="wrap">
		<!-- container -->
		<div class="container">
			<!-- content -->
			<div id="content">

				<!-- page_info_area -->
				<div class="page_info_area">
					<div class="left">
						<div class="location_area">
							<a href="#" class="bookmark active" title="즐겨찾기"></a>
							<ul>
								
							</ul>
						</div>
						<div class="title_area">
							<p>AI 진단</p>
							<a href="#" class="reload_btn" title="새로고침">새로고침</a>
							<a href="#"	class="help_btn" title="도움말">도움말</a>
						</div>
					</div>
					<div class="right">
						<div class="button_area">
							<button class="btn" title="결과다운로드" onclick="fnReportDown(); return false;">결과다운로드</button>
						</div>
					</div>
				</div>
				
				
				<input type="hidden" name="atmcDgnssExcnSn" id="atmcDgnssExcnSn" th:value="${paramMap.atmcDgnssExcnSn}" />
				<div class="content_area">
					<div class="dashboard">
						<div class="row">
							<div class="left" style="max-width:25%; max-height:150px;">
								<div class="row">
									<div class="bx-wrap" style="min-height:150px;">
										<div class="bx-wrap card02" style="border: 0px;">
											<p class="tit">데이터 준수</p>
											<p class="result" id="databaseObsryRateFrac">0/0</p>
											<p class="result" id="databaseObsryRate">0%</p>
										</div>
									</div>
								</div>
								<div class="row">
									<div class="bx-wrap" style="min-height:150px;">
										<div class="bx-wrap card02" style="border: 0px;">
											<p class="tit">이전 점검 대비 데이터 준수 증감</p>
											<div class="row">
												<div class="icon-wrap" style="width:24px;height:24px;padding-top:5px;padding-right:5px;">
	                                           		<img id='trendIcon' src="" />
	                                           	</div>
												<p class="result" id="bfDatabaseObsryRate">0%</p>
                                           	</div>
										</div>
									</div>
								</div>
								<div class="row">
									<div class="bx-wrap" style="min-height:445px;">
										<div class="bx-header" style="border-bottom:0px;">
											<p class="title">컬럼별 예측 확률 증감</p>
			                            </div>
			                            <div class="bx-content" style="border: 0px;">
			                            
			                            	<div class="tbl_wrap v2 head-fixed" data-height="382">
		                                        <div class="tbl_head">
		                                            <table>
		                                                <colgroup>
		                                                    <col style="width: 70%;">
		                                                    <col style="width: 30%;">
		                                                </colgroup>
		                                                <thead>
		                                                    <tr>
		                                                        <th>위치</th>
		                                                        <th>증감</th>
		                                                    </tr>
		                                                </thead>
		                                            </table>
		                                        </div>
		                                        <div class="tbl_body">
		                                            <table id="tb_columnTrends_table">
		                                                <colgroup>
		                                                    <col style="width: 70%;">
		                                                    <col style="width: 30%;">
		                                                </colgroup>
		                                                <tbody>
		                                                    <tr class="fwk_templete_row">
		                                                        <td class="alignl">#{dataPosition}</td>
		                                                        <td name="rateTrends">#{colObsryRate}</td>
		                                                    </tr>
		                                                </tbody>
		                                            </table>
		                                        </div>
		                                    </div>
			                            
			                            
		                            	</div>
									</div>
								</div>
							</div>
							
							<div class="right">
								<div class="row" style="max-height:150px;">
									<div class="bx-wrap" style="min-height:150px;">
										<div class="bx-wrap card02" style="border: 0px;">
											<p class="tit">점검 컬럼 수</p>
											<p class="result" id="columnCount">0건</p>
										</div>
									</div>
									<div class="bx-wrap" style="min-height:150px;">
										<div class="bx-wrap card02" style="border: 0px;">
											<p class="tit">점검 데이터 수</p>
											<p class="result" id="dataCount">0건</p>
										</div>
									</div>
									<div class="bx-wrap" style="min-height:150px;">
										<div class="bx-wrap card02" style="border: 0px;">
											<p class="tit">이상 데이터 수</p>
											<p class="result" id="errorCount">0건</p>
										</div>
									</div>
								</div>
								
								<div class="row">
									<div>
										<div class="row">
											<div class="bx-wrap">
												<div class="bx-header" style="border-bottom:0px;">
													<p class="title">데이터 준수율 추이</p>
					                            </div>
					                            <div class="bx-wrap card02" style="border: 0px;" id="databaseObsryRateTrends">
					                            	
				                            	</div>
											</div>
										</div>
										<div class="row">
											<div class="bx-wrap">
												<div class="bx-header" style="border-bottom:0px;">
													<p class="title">분류 이상 값 분석</p>
					                            </div>
					                            <div class="bx-wrap card02" style="border: 0px;" id="clErrCntInfo">
				                            	</div>
											</div>
										</div>
									</div>
									
									<div class="bx-wrap">
										<div class="bx-header" style="border-bottom:0px;">
											<p class="title">컬럼 분류 분석</p>
			                            </div>
			                            <div class="bx-wrap card02" style="border: 0px;" id="clColCntInfo">
		                            	</div>
									</div>
									
								</div>
							</div>
						</div>
							
		
						
						
						<div class="row">
							<div class="left">
								<div class="table_area">
									<div class="card">
										<table class="search fixed marginb10">
											<colgroup>
												<col style="width:70px;" />
												<col style="width:auto;" />
												<col style="width:60px;" />
												<col style="width:70px;" />
												<col style="width:auto;" />
												<col style="width:60px;" />
												<col style="width:100px;" />
											</colgroup>
											<tbody>
												<tr>
													<th scope="row"><label for="">테이블명</label></th>
													<td><input type="text" class="in_w100" id="clTabSearchKey" name="clTabSearchKey"/></td>
													<td></td>
													<th scope="row"><label for="prhibtYn">컬럼명</label></th>
													<td><input type="text" class="in_w100" id="clColSearchKey" name="clColSearchKey"/></td>
													<td></td>
													<td class="alignr"><button class="btn sm" onclick="fnSearchCl(); return false;">조회</button></td>
												</tr>									
											</tbody>
										</table>
										
										<table class="list fixed" id="tb_cl_table">
											<colgroup>
												<col style="width:60px;" />
												<col style="width:auto;" />
												<col style="width:auto;" />
												<col style="width:100px;" />
												<col style="width:80px;" />
												<col style="width:80px;" />
												<col style="width:100px;" />
												<col style="width:100px;" />
											</colgroup>
											<thead>
												<tr>
													<th>No</th>
													<th>테이블명</th>
													<th>컬럼명</th>
													<th>예측분류</th>
													<th>데이터 수</th>
													<th>이상 건수</th>
													<th>예측확률(%)</th>
													<th>상세보기</th>
												</tr>
											</thead>
											<tbody>
												<tr class="fwk_templete_row">
													<td>#{FWK_TR_NO}</td>
													<td class="alignl" name="dgnssTblNm">#{dgnssTblNm}</td>
													<td class="alignl" name="dgnssColNm">#{dgnssColNm}</td>
													<td>#{colClPredictValue}</td>
													<td class="alignr">#fn{fnFormatNumber(#{dgnssDataCnt})}</td>
													<td class="alignr">#fn{fnFormatNumber(#{clAnlsErrCnt})}</td>
													<td class="alignr">#{colObsryRate}%</td>
													<td><button class="btn sm" onclick="fnShowDetail('#{colObsryRate}', '#{colClPredictValue}', '#{totDataCnt}', '#{dgnssDataCnt}', '#{clAnlsErrCnt}', '#{dgnssTblNm}', '#{dgnssColNm}'); return false;">상세보기</button></td>
												</tr>
											</tbody>
										</table>
										
										<div class="pagination_area marginb25" id="dv_cl_paging">
										</div>
									</div>
								</div>
							</div>
							
							<div class="right">
								<div class="table_area">
									<div class="card">
										
										<table class="search fixed marginb10">
											<colgroup>
												<col style="width:70px;" />
												<col style="width:auto;" />
												<col style="width:60px;" />
												<col style="width:70px;" />
												<col style="width:auto;" />
												<col style="width:60px;" />
												<col style="width:100px;" />
											</colgroup>
											<tbody>
												<tr>
													<th scope="row"><label for="">테이블명</label></th>
													<td><input type="text" class="in_w100" id="clsfTableSearchKey" name="clsfTableSearchKey"/></td>
													<td></td>
													<th scope="row"><label for="prhibtYn">컬럼명</label></th>
													<td><input type="text" class="in_w100" id="clsfColumnSearchKey" name="clsfColumnSearchKey"/></td>
													<td></td>
													<td class="alignr"><button class="btn sm" onclick="fnSearchNlp(); return false;">조회</button></td>
												</tr>									
											</tbody>
										</table>
										
										<table class="list fixed" id="tb_nlp_table">
											<colgroup>
												<col style="width:60px;" />
												<col style="width:auto;" />
												<col style="width:60px;" />
												<col style="width:auto;" />
												<col style="width:auto;" />
												<col style="width:150px;" />
												<col style="width:150px;" />
											</colgroup>
											<thead>
												<tr>
													<th>No</th>
													<th>테이블명.컬럼명</th>
													<th>예측 값</th>
													<th>원본</th>
													<th>띄어쓰기교정</th>
													<th>에러내용</th>
													<th>추천 값</th>
												</tr>
											</thead>
											<tbody>
												<tr class="fwk_templete_row">
													<td>#{FWK_TR_NO}</td>
													<td class="alignl">#{dbmsTableNm}.#{columnName}</td>
													<td>#{predict}</td>
													<td class="alignl">#{inputSentence}</td>
													<td class="alignl">#{checkedSentence}</td>
													<td>#fn{fnErrWordFont('#{errorWord}')}</td>
													<td>#{recommendWord}</td>
												</tr>
											</tbody>
										</table>
										
										<div class="pagination_area marginb25" id="dv_nlp_paging">
										</div>
									</div>
								</div>
							</div>
						</div>
						
						
						<div class="dashboard">
							<div class="row">
								<div class="left">
									<div class="row" id="clCntDetail_div">
										<div class="bx-wrap">
											<div class="bx-header" style="border-bottom:0px;">
												<p class="title" id="clCntDetailTb_title"></p>
				                            </div>
				                            <div class="bx-content" style="border: 0px;">
					                            <div class="tbl_wrap v2 head-fixed" data-height="382">
			                                        <div class="tbl_head">
			                                            <table>
			                                                <colgroup>
			                                                    <col style="width: 60%;">
			                                                    <col style="width: 40%;">
			                                                </colgroup>
			                                                <thead>
			                                                    <tr>
			                                                        <th>분류명</th>
			                                                        <th>빈도</th>
			                                                    </tr>
			                                                </thead>
			                                            </table>
			                                        </div>
			                                        <div class="tbl_body">
			                                            <table id="tb_hist_table">
			                                                <colgroup>
			                                                    <col style="width: 60%;">
			                                                    <col style="width: 40%;">
			                                                </colgroup>
			                                                <tbody>
			                                                    <tr class="fwk_templete_row">
			                                                        <td>#{clName}</td>
			                                                        <td>#{clCnt}</td>
			                                                    </tr>
			                                                </tbody>
			                                            </table>
			                                        </div>
			                                    </div>
			                                </div>
										</div>
										
										<div class="bx-wrap">
											<div class="bx-header" style="border-bottom:0px;">
												<p class="title" id="clCntDetailCht_title"></p>
				                            </div>
				                            <div class="bx-wrap card02" style="border: 0px;" id="clCntDetail">
				                            </div>
										</div>
									</div>
								</div>
								<div class="right">
								
								</div>
							</div>
						</div>
						
					</div>
				</div>
			</div>
		</div>
	</div>


	<div class="popup layer" id="columnContentDetail_modal" style="width:800px;">
		<div class="pop_header">
			<p class="title" id="title_modal"></p>
			<button class="btn_ic btn_pop_close" onclick="fnCloseModal('columnContentDetail_modal');">닫기</button>
		</div>
		
		<div class="pop_content">
			<div class="search_wrap card">
				<table class="search fixed">
					<colgroup>
						<col style="width:150px;">
						<col style="width:auto;">
						<col width="40px;" />
						<col style="width:150px;">
						<col style="width:auto;">
					</colgroup>
					<tbody>
						<tr>
							<th>예측카운트(확률)</th>
							<td><input type="text" class="in_w100" name="predCnt_modal" id="predCnt_modal" readonly="readonly" /></td>
							<td></td>
							<th>예측분류</th>
							<td><input type="text" class="in_w100" name="predVal_modal" id="predVal_modal" readonly="readonly" /></td>
						</tr>
						
						<tr>
							<th>총데이터수</th>
							<td><input type="text" class="in_w100" name="totCnt_modal" id="totCnt_modal" readonly="readonly" /></td>
							<td></td>
							<th>점검데이터수</th>
							<td><input type="text" class="in_w100" name="dgnssCnt_modal" id="dgnssCnt_modal" readonly="readonly" /></td>
						</tr>
						
						<tr>
							<th>이상건수</th>
							<td><input type="text" class="in_w100" name="errCnt_modal" id="errCnt_modal" readonly="readonly" /></td>
							<td></td>
							<th></th>
							<td></td>
						</tr>
					</tbody>
				</table>
			</div>
			
			<div class="tbl_top margint20">※ 오분류(이상) 데이터만 표시됩니다.</div>
			<div class="table_area" style="max-height:600px;overflow-y:scroll;">
				<table class="list fixed" id="tb_clDetail_table">
					<colgroup>
						<col style="width:150px;">
						<col style="width:auto;">
						<col style="width:170px;">
					</colgroup>
					<thead>
						<tr>
							<th>No</th>
							<th>데이터</th>
							<th>오분류 값(이상 값)</th>
						</tr>
					</thead>
					<tbody>
						<tr class="fwk_templete_row">
							<td>#{FWK_TR_NO}</td>
							<td>#{COL_VAL}</td>
							<td>#{PREDICT_VALUE}</td>
						</tr>
					</tbody>
				</table>
			</div>
			
		</div>
		
		<div class="pop_footer">
	</div>
	</div>

<script type="text/javascript">

$(document).ready(function() {
	var atmcDgnssExcnSn = $("#atmcDgnssExcnSn").val();
	//console.log(atmcDgnssExcnSn);
	$.ajax({
		url: "/json/aiProfileMng/getAutoDgnssResult"
		, method: "POST"
		, contentType: "application/json"
		, data: JSON.stringify({
			atmcDgnssExcnSn: atmcDgnssExcnSn
		})
		, success: function(data){
			//console.log(data)
			
			var anlsBasicInfo = data.anlsBasicInfo;
			$("#databaseObsryRateFrac").text(fnFormatNumber(anlsBasicInfo.dataCount-anlsBasicInfo.errorCount) + '/' + fnFormatNumber(anlsBasicInfo.dataCount));
			$("#databaseObsryRate").text(Math.round(anlsBasicInfo.databaseObsryRate*100) / 100 + '%');
			
			$("#columnCount").text(fnFormatNumber(anlsBasicInfo.columnCount));
			$("#dataCount").text(fnFormatNumber(anlsBasicInfo.dataCount));
			$("#errorCount").text(fnFormatNumber(anlsBasicInfo.errorCount));
			
			var incr_decr = anlsBasicInfo.databaseObsryRate - anlsBasicInfo.bfDatabaseObsryRate;
			if (Math.round(incr_decr*100) / 100 > 0) {
				$("#bfDatabaseObsryRate").css('color', 'blue');
				$("#trendIcon").attr('src', '/img/icon/arrow-up.png;')
			} else if (Math.round(incr_decr*100) / 100 < 0) {
				$("#bfDatabaseObsryRate").css('color', 'red');
				$("#trendIcon").attr('src', '/img/icon/arrow-down.png;')
			}
			$("#bfDatabaseObsryRate").text(Math.round(incr_decr*100) / 100 + '%');
			
			
			fnBindTableValue("tb_columnTrends_table", data.colObsryRate);
			$("#tb_columnTrends_table tbody tr").each(function() {
				var tr = $(this);
				if (tr.find("td").eq(1).text() > 0) {
					tr.find("td").eq(1).css('color', 'blue');
					html = "<img src='/img/icon/arrow-up.png' style='width:12px;height:12px;padding-right:5px;' />"
					tr.find("td").eq(1).prepend(html)
					tr.find("td").eq(1).append("%")
				} else if (tr.find("td").eq(1).text() < 0){
					tr.find("td").eq(1).css('color', 'red');
					html = "<img src='/img/icon/arrow-down.png' style='width:12px;height:12px;padding-right:5px;' />"
					tr.find("td").eq(1).prepend(html)
					tr.find("td").eq(1).append("%")
				}
			});
			fnDraw_databaseObsryRateTrends("databaseObsryRateTrends", data.databaseObsryRateTrends);
			fnDraw_clErrCntInfo("clErrCntInfo", data.anlsClErrCntInfo);
			fnDraw_clColCntInfo("clColCntInfo", data.anlsClColCntInfo, 50, 250);
			
			fnSearchCl();
			fnSearchNlp();
			
			$("#clCntDetail_div").hide();
		}
	});
	
	
	$("#clColSearchKey, #clTabSearchKey").on("keyup", function(event) {
		if(event.keyCode == 13) {
			fnSearchCl();
		}
	});
	
	
	$("#clsfColumnSearchKey, #clsfTableSearchKey").on("keyup", function(event) {
		if(event.keyCode == 13) {
			fnSearchNlp();
		}
	});
	
});


// 분류 분석 테이블 조회
function fnSearchCl(pageNum) {
	if (!pageNum)
		pageNum = 1;
	
	$.ajax({
		url: "/json/aiProfileMng/getDgnssClList"
		, method: "POST"
		, contentType: "application/json"
		, data: JSON.stringify({
			pageNum: pageNum
			, atmcDgnssExcnSn: $("#atmcDgnssExcnSn").val()
			, dgnssTblNm: $("#clTabSearchKey").val()
			, dgnssColNm: $("#clColSearchKey").val()
		})
		, success: function(data){
			
			fnBindTableValue("tb_cl_table", data.anlsColInfo, data.anlsColPagingInfo);
			fnSetPaging("dv_cl_paging", data.anlsColPagingInfo, "fnSearchCl");
			
			fnSelectTrEvent("#tb_cl_table tbody tr", function(rtnObj){
 				dgnssTblNm = $(rtnObj).find("td[name=dgnssTblNm]").text();
 				dgnssColNm = $(rtnObj).find("td[name=dgnssColNm]").text();
 				
 				fnDraw_clDetail(dgnssTblNm, dgnssColNm);
			});
		}
	});
}



// 자연어분석 테이블 조회
function fnSearchNlp(pageNum) {
	if (!pageNum)
		pageNum = 1;
	
	$.ajax({
		url: "/json/aiProfileMng/getDgnssNlpList"
		, method: "POST"
		, contentType: "application/json"
		, data: JSON.stringify({
			pageNum: pageNum
			, atmcDgnssExcnSn: $("#atmcDgnssExcnSn").val()
			, dgnssTblNm: $("#clsfTableSearchKey").val().toUpperCase()
			, dgnssColNm: $("#clsfColumnSearchKey").val().toUpperCase()
		})
		, success: function(data){
			fnBindTableValue("tb_nlp_table", data.nowPageList, data.nlpPagingInfo);
			fnSetPaging("dv_nlp_paging", data.nlpPagingInfo, "fnSearchNlp");
		}
	});
}



// 분류분석 테이블 행 선택시 상세 조회
function fnDraw_clDetail(dgnssTblNm, dgnssColNm) {
	$.ajax({
		url: "/json/aiProfileMng/getClDetail"
		, method: "POST"
		, contentType: "application/json"
		, data: JSON.stringify({
			atmcDgnssExcnSn: $("#atmcDgnssExcnSn").val()
			, dgnssTblNm: dgnssTblNm
			, dgnssColNm: dgnssColNm
		})
		, success: function(data) {
			$("#clCntDetail_div").show();
			
			$("#clCntDetailTb_title").text(dgnssTblNm + "." + dgnssColNm + " 상세 분류 빈도");
			$("#clCntDetailCht_title").text(dgnssTblNm + "." + dgnssColNm + " 상세 분류 차트");
			
			fnBindTableValue("tb_hist_table", data.clCntDetail);
			
			var cntArray = new Array();
			for (var i=0; i<data.clCntDetail.length; i++) {
				var map = data.clCntDetail[i]
				var obj = new Object();
				var clName = map.clName;
				obj[clName] = map.clCnt;
				cntArray[cntArray.length] = obj
			}
			fnDraw_clColCntInfo("clCntDetail", cntArray, 25, 125);
		}
	});
}


// 분류분석 테이블 상세보기 레이어팝업
function fnShowDetail(colObsryRate, colClPredictValue, totDataCnt, dgnssDataCnt, clAnlsErrCnt, dgnssTblNm, dgnssColNm) {
	$("#title_modal").text(dgnssTblNm + "." + dgnssColNm + " 상세");
	
	var cnt = dgnssDataCnt - clAnlsErrCnt
	$("#predCnt_modal").val(cnt + " / " + dgnssDataCnt + " (" + colObsryRate + "%)")
	$("#predVal_modal").val(colClPredictValue);
	$("#totCnt_modal").val(totDataCnt);
	$("#dgnssCnt_modal").val(dgnssDataCnt);
	$("#errCnt_modal").val(clAnlsErrCnt);
	
	$.ajax({
		url: "/json/aiProfileMng/getClDetailContent"
		, method: "POST"
		, contentType: "application/json"
		, data: JSON.stringify({
			atmcDgnssExcnSn: $("#atmcDgnssExcnSn").val()
			, dgnssTblNm: dgnssTblNm
			, dgnssColNm: dgnssColNm
		})
		, success: function(data) {
			fnBindTableValue("tb_clDetail_table", data.clCntDetailContent);
		}
	});	
	fnShowModal("columnContentDetail_modal");
}



//에러 데이터 색깔
function fnErrWordFont(errWord) {
	if (errWord == "" || errWord == null) {
		return errWord;
	}
	var errWordList = errWord.split(" ");
	var errTextRed = "<span style='color:red'>" + errWordList[1] + "</span>";
	errWordList[1] = errTextRed;
	
	return errWordList.join(" ");
}


// 좌측 예측확률 증감 테이블
function fnDraw_databaseObsryRateTrends(id, data) {
	var option;
	var snList = new Array();
	var dataList = new Array();
	for (var i=0; i<data.length; i++) {
		var map = data[i];
		if (map.databaseObsryRate != 0 && map.databaseObsryRate != null) {
			dataList.push(Math.round(map.databaseObsryRate*100) / 100);
			snList.push(map.atmcDgnssExcnSn);			
		}
	}
	
	option = {
			  tooltip: {
				trigger: 'axis'  
			  },
			  toolbox: {
			    show: true,
			    feature: {
			      dataZoom: {
			        yAxisIndex: 'none'
			      },
			      dataView: { readOnly: false },
			      magicType: { type: ['line', 'bar'] },
			      restore: {},
			      saveAsImage: {}
			    }
			  },
			  xAxis: {
			    type: 'category',
			    boundaryGap: false,
			    data: snList
			  },
			  yAxis: {
			    type: 'value',
			    min: Math.floor(Math.min.apply(null, dataList) / 10) * 10,
			  	max: Math.ceil(Math.max.apply(null, dataList) / 10) * 10,
			    axisLabel: {
			      formatter: '{value} %'
			    }
			  },
			  series: [
			    {
			      name: 'Highest',
			      type: 'line',
			      data: dataList,
			      markPoint: {
			        data: [
			          { type: 'max', name: 'Max' },
			          { type: 'min', name: 'Min' }
			        ]
			      },
			      markLine: {
			        data: [{ type: 'average', name: 'Avg' }]
			      }
			    }
			  ]
			};
	
	var chartDom = document.getElementById(id);
	var myChart = echarts.init(chartDom);
	option && myChart.setOption(option);
}



// 중앙 예측 분류별 이상 건수
function fnDraw_clErrCntInfo(id, data) {
	var targetList = new Array();
	var valueList = new Array();
	for (var i=0; i<data.length; i++) {
		var map = data[i]
		for (key in map) {
			if (map[key] != 0) {
				targetList[targetList.length] = key 
				valueList[valueList.length] = map[key]
			}
		}
	}
	
	option = {
			  tooltip: {
			    trigger: 'axis',
			    axisPointer: {
			      type: 'shadow'
			    }
			  },
			  grid: {
			    left: '3%',
			    right: '4%',
			    bottom: '3%',
			    containLabel: true
			  },
			  xAxis: [
			    {
			      type: 'category',
			      data: targetList,
			      axisTick: {
			        alignWithLabel: true
			      }
			    }
			  ],
			  yAxis: [
			    {
			      type: 'value'
			    }
			  ],
			  series: [
			    {
			      name: '오분류 건 수 : ',
			      type: 'bar',
			      barWidth: '60%',
			      data: valueList
			    }
			  ]
			};
	var chartDom = document.getElementById(id);
	var myChart = echarts.init(chartDom);
	option && myChart.setOption(option);
}




// 우측 분류(속성)별 컬럼 카운트
function fnDraw_clColCntInfo(id, data, minSize, maxSize) {
	
	var list = new Array();
	
	for (var i=0; i<data.length; i++) {
		var map = data[i];
		var obj = new Object();
		for (key in map) {
			if (map[key] != 0) {
				obj.name = key;
				obj.value = map[key];
				
			}
		}
		if (map[key] != 0) {
			list[list.length] = obj;
		}
	}
	
	option = {
		  tooltip: {
			  trigger: 'item'
		  },
		  toolbox: {
		    show: true,
		    feature: {
		      mark: { show: true },
		      dataView: { show: true, readOnly: false },
		      restore: { show: true },
		      saveAsImage: { show: true }
		    }
		  },
		  series: [
		    {
		      name: '예측 분류 명',
		      type: 'pie',
		      radius: [minSize, maxSize],
		      center: ['50%', '50%'],
		      roseType: 'area',
		      itemStyle: {
		        borderRadius: 8
		      },
		      data: list
		    }
		  ]
		};
	var chartDom = document.getElementById(id);
	var myChart = echarts.init(chartDom);
	option && myChart.setOption(option);
}


</script>
</body>
</html>




